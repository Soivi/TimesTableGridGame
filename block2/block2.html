<!DOCTYPE html>
<html>

<head>
	<title>Block 2</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link href="../styles/default.css" rel="stylesheet" type="text/css" />
	<script src="../js/localStorage.js"></script>

	<script>
		let unlockSeconds = 15;

		// Initialize localStorage and check unlock status when page loads
		window.addEventListener("pageshow", function() {
			initializeLocalStorage();
			checkUnlockStatus();
		});

		// Check unlock status using localStorage
		function checkUnlockStatus() {
			try {
				const highscores = getHighScores();
				
				// Check each level (indices 16-24 for block2 levels 1-10)
				// Block2 uses score-based progression (>= 15 correct answers)
				if (highscores[16] && highscores[16] >= unlockSeconds) {
					document.getElementById("Button2").disabled = false;
				}
				if (highscores[17] && highscores[17] >= unlockSeconds) {
					document.getElementById("Button3").disabled = false;
				}
				if (highscores[18] && highscores[18] >= unlockSeconds) {
					document.getElementById("Button4").disabled = false;
				}
				if (highscores[19] && highscores[19] >= unlockSeconds) {
					document.getElementById("Button5").disabled = false;
				}
				if (highscores[20] && highscores[20] >= unlockSeconds) {
					document.getElementById("Button6").disabled = false;
				}
				if (highscores[21] && highscores[21] >= unlockSeconds) {
					document.getElementById("Button7").disabled = false;
				}
				if (highscores[22] && highscores[22] >= unlockSeconds) {
					document.getElementById("Button8").disabled = false;
				}
				if (highscores[23] && highscores[23] >= unlockSeconds) {
					document.getElementById("Button9").disabled = false;
				}
				if (highscores[24] && highscores[24] >= unlockSeconds) {
					document.getElementById("Button10").disabled = false;
				}
			} catch (error) {
				console.error("Error checking unlock status:", error);
			}
		}
	</script>
</head>

<body style="background-image:url(../pictures/background.png);">

	<div class="indexButtons">
		<a href="block2Info.html"><button>Block 2 Info</button></a>
	</div>

	<div class="blockButtons">
		<a href="level2_1.html"><button id="Button1">1</button></a>
		<a href="level2_2.html"><button disabled id="Button2">2</button></a>
		<a href="level2_3.html"><button disabled id="Button3">3</button></a>
		<a href="level2_4.html"><button disabled id="Button4">4</button></a>
		<a href="level2_5.html"><button disabled id="Button5">5</button></a>
		<a href="level2_6.html"><button disabled id="Button6">6</button></a>
		<a href="level2_7.html"><button disabled id="Button7">7</button></a>
		<a href="level2_8.html"><button disabled id="Button8">8</button></a>
		<a href="level2_9.html"><button disabled id="Button9">9</button></a>
		<a href="level2_10.html"><button disabled id="Button10">10</button></a>
	</div>
</body>

</html>